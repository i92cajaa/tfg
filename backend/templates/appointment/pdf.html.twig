<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Mentorias</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;1,400;1,500;1,600" rel="stylesheet">
    <style>
        *{
            font-family: "Montserrat", Helvetica, Arial, serif;
        }

        .text-center{
            text-align: center;
        }

        .userInfo{
            padding-left: 20px;
            padding-right: 20px;
            margin-bottom: 50px;
            border: 1px solid darkgrey;

        }

        .dateDiv, .userDiv{
            page-break-after: always;
        }


        .appointments{
            padding-left: 50px;
        }

        td{
            min-width: 200px;
            border-bottom: 1px solid lightgrey;
            border-collapse: collapse;
            page-break-inside: avoid;
        }

        thead th{
            border-bottom: 2px solid lightgrey;
            border-collapse: collapse;
            page-break-inside: avoid;
        }

        .border-bottom{
            border-bottom: 2px solid black;
        }

        .pb-3{
            padding-bottom: 30px;
        }

        .mt-2{
            margin-top: 20px;
        }

        .logo{
            max-width: 50%;
            max-height: 200px;
        }

        .w-50{
           width: 50%;
        }


    </style>
</head>
<body>
    <div class="w-50">
        <img src="data:image/png;base64, {{ img }}" class="logo" />
    </div>
    {% for date, users in appointments %}
        <div class="{% if not loop.last %}dateDiv{% endif %}">

            {% for user in users %}
                <div class="{% if user != users|last %}userDiv{% endif %} ">

                    <div>
                        <h2>{{ 'Date'|trans }}: {{ date }}</h2>
                    </div>
                    <div class="userInfo">

                        <div class="pb-3 mt-2">
                            <div>
                                <h3 class="user-name">{{ configuration.user_nomenclature|trans }}: {{  user['user'].fullName }}</h3>
                            </div>

                            <div class="appointments">

                                <table>
                                    <thead>
                                    <th class="text-center">{{ 'Start Date'|trans }}</th>
                                    <th class="text-center">{{ 'End Date'|trans }}</th>
                                    <th class="text-center">{{ configuration.client_nomenclature|trans }}</th>
                                    </thead>
                                    <tbody>

                                    {% for userSchedules in user['schedules'] %}
                                        {% if userSchedules.status and user['appointments'][userSchedules.id] is defined %}
                                            {% for appointment in user['appointments'][userSchedules.id] %}

                                                <tr>
                                                    <td class="text-center">{{ appointment.timeFrom|UTCDateTimeFormat('H:i') }}</td>
                                                    <td class="text-center">{{ appointment.timeTo|UTCDateTimeFormat('H:i') }}</td>
                                                    <td class="text-center">{{ appointment.client.fullName }}</td>
                                                </tr>

                                            {% endfor %}
                                        {% endif %}

                                    {% endfor %}

                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>

                </div>


            {% endfor %}



        </div>

    {% endfor %}
</body>