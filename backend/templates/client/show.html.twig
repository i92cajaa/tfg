{% extends 'base-admin.html.twig' %}

{% block title %}Mostrar Cliente{% endblock %}

{% block page_title %}
    {{ ('Show ' ~ configuration.user_nomenclature)|trans }}
{% endblock %}

{% block body %}
    <div class="container-fluid">
        <!-- User Card & Plan Starts -->
        <div class="row">
            <!-- User Card starts-->
            <div class="col-xl-12 col-lg-12 col-md-12">
                <div class="card user-card">
                    <div class="card-body">
                        <div class="row">
                            <h2 class="row gap-2 align-items-center m-0">Información Principal</h2>
                            <hr>
                            <div class="col-md-12">
                                <div class="row gy-4">
                                    <div class="col-md-2">
                                        <label class="form-label fw-bold">Nombre</label>
                                        <p class="card-text mb-0">{{ client.name }}</p>
                                    </div>
                                    <div class="col-md-2">
                                        <label class="form-label fw-bold">Apellidos</label>
                                        <p class="card-text">{{ client.surnames }}</p>
                                    </div>
                                    <div class="col-md-2">
                                        <label class="form-label fw-bold">Teléfono</label>
                                        <p class="card-text ">{{ client.phone }}</p>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label fw-bold">Correo Electrónico</label>
                                        <p class="card-text ">{{ client.email }}</p>
                                    </div>
                                </div>
                            </div>
                            <hr class="mt-3">

                            <div class="overflow-auto">
                                <table class="user-list-table table table-list">
                                    <thead class="thead-light">
                                    <tr>
                                        <th>
                                            <a href="{{ filterService.orderBy("lesson", filterService.getInversedOrder("lesson")) }}">
                                                {{ 'Lesson'|trans }} {% if filterService.isOrdered("lesson") %}<i data-feather="{{ filterService.getOrder("lesson").order == 'asc' ? 'chevron-up' : 'chevron-down' }}"></i>{% endif %}
                                            </a>
                                        </th>
                                        <th>
                                            <a href="{{ filterService.orderBy("lesson", filterService.getInversedOrder("lesson")) }}">
                                                {{ 'Day'|trans }} {% if filterService.isOrdered("lesson") %}<i data-feather="{{ filterService.getOrder("lesson").order == 'asc' ? 'chevron-up' : 'chevron-down' }}"></i>{% endif %}
                                            </a>
                                        </th>
                                        <th>
                                            Hora de Inicio
                                        </th>
                                        <th>
                                            Hora de Fin
                                        </th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    {% for booking in bookings %}
                                        <tr>
                                            <td>
                                                <a href="{% if userPermission.can('show', 'lessons') %}{{ path('lesson_show', {'lesson': booking.schedule.lesson.id}) }}{% else %}#{% endif %}"
                                                   data-bs-toggle="tooltip" data-bs-placement="bottom" title="" class="cursor-pointer">{{ booking.schedule.lesson.name }}
                                                </a>
                                            </td>
                                            <td>
                                                {{ booking.schedule.dateFrom|UTCDateTimeFormat('d/m/Y') }}
                                            </td>
                                            <td>
                                                <span class="badge badge-light-primary badge-pill">{{ booking.schedule.dateFrom|UTCDateTimeFormat('H:i') }}</span>
                                            </td>
                                            <td>
                                                <span class="badge badge-light-secondary badge-pill">{{ booking.schedule.dateTo|UTCDateTimeFormat('H:i') }}</span>
                                            </td>
                                        </tr>
                                    {% else %}
                                        <tr>
                                            <td colspan="4">{{ 'No results found'|trans }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <div class="d-flex justify-content-end mr-4 mt-2">
                                {% include 'extra/pagination.html.twig' with {
                                    filterService: filterService,
                                    currentPage: filterService.page,
                                    paginationPath: 'booking_index',
                                    lastPage: lastPage,
                                    showAlwaysFirstAndLast: true
                                } only %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            <!-- /User Card Ends-->
        <!-- User Card & Plan Ends -->
    </div>


{% endblock %}

{% block action_buttons %}
    <li class="level-menu outside">
        <a class="nav-link cursor-pointer" href="#" onclick="window.history.back()" >
            <i class="ficon" data-feather="chevron-left"></i>
        </a>
        <a class="nav-link cursor-pointer" href="{{ userPermission.can('edit', 'users') ? path('user_edit', {'user': client.id}) : '#' }}"  >
            <i class="ficon" data-feather="edit"></i>
        </a>
    </li>
{% endblock %}


{% block stylesheets %}
    <style>
        .scrolled-div{
            max-height: 500px;
            overflow-y: scroll;
        }
    </style>
{% endblock %}

{% block javascripts %}
    <script>

        $('#filter').on('click', function () {
            $('#filter_form').attr('action', '#');
        })


        $(function() {
            $('.select2').select2();
            $('.select2-selection__arrow').remove();

        });
    </script>
{% endblock %}